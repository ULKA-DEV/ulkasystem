<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULKA Command Center v3</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700;800&display=swap" rel="stylesheet">
    <script src="config.js"></script>
    <style>
        :root { --primary: #00d4ff; --bg: #0b0f19; --card-bg: rgba(30, 41, 59, 0.5); --border: rgba(255, 255, 255, 0.1); }
        body { font-family: 'Sarabun', sans-serif; background-color: var(--bg); color: #fff; margin: 0; overflow-x: hidden; }

        /* üåå Layout & Sidebar */
        .top-header { height: 60px; background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; border-bottom: 1px solid var(--border); position: fixed; width: 100%; z-index: 1000; }
        .sidebar { position: fixed; left: 0; top: 60px; bottom: 0; width: 240px; background: rgba(15, 23, 42, 0.9); border-right: 1px solid var(--border); transition: 0.3s; transform: translateX(-240px); z-index: 999; }
        .sidebar.active { transform: translateX(0); }
        .main-content { padding: 80px 20px 40px 20px; max-width: 1200px; margin: 0 auto; }

        /* üîã Section 1: Energy Hub (The Core) */
        .glass-panel { background: var(--card-bg); backdrop-filter: blur(12px); border-radius: 24px; border: 1px solid var(--border); padding: 30px; margin-bottom: 25px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); }
        .energy-label { font-size: 5rem; font-weight: 800; color: var(--primary); text-shadow: 0 0 20px rgba(0, 212, 255, 0.5); line-height: 1; margin-bottom: 10px; }
        .energy-bar-container { width: 100%; max-width: 600px; height: 18px; background: rgba(255,255,255,0.05); border-radius: 50px; margin: 20px auto; position: relative; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
        .energy-bar-fill { height: 100%; background: linear-gradient(90deg, #0062ff, #00d4ff); width: 0%; transition: 2s cubic-bezier(0.22, 1, 0.36, 1); box-shadow: 0 0 15px var(--primary); }

        /* üìä Section 2: Daily Snapshot (6 Modules) */
        .snapshot-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        @media (min-width: 992px) { .snapshot-grid { grid-template-columns: repeat(6, 1fr); } }
        
        .snap-card { background: rgba(30, 41, 59, 0.4); border-radius: 18px; padding: 20px; border: 1px solid var(--border); text-align: left; position: relative; transition: 0.3s; }
        .snap-card:hover { transform: translateY(-5px); border-color: var(--primary); background: rgba(0, 212, 255, 0.05); }
        .snap-card i { font-size: 1.2rem; margin-bottom: 15px; display: block; }
        .snap-val { font-size: 1.8rem; font-weight: 800; display: block; color: #fff; }
        .snap-label { font-size: 0.7rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 1px; }
        .snap-card::after { content: ""; position: absolute; bottom: 0; left: 18px; right: 18px; height: 3px; border-radius: 10px; }
        .card-mkt::after { background: #ef4444; } .card-con::after { background: #ec4899; } .card-sal::after { background: #0ea5e9; }
        .card-cs::after { background: #a855f7; } .card-stk::after { background: #f59e0b; } .card-tec::after { background: #10b981; }

        /* üì± Section 3: Pulse Feed */
        .feed-card { background: rgba(30, 41, 59, 0.3); border-radius: 20px; border: 1px solid var(--border); margin-bottom: 20px; }
        .feed-header { padding: 15px; display: flex; align-items: center; gap: 12px; }
        .avatar { width: 40px; height: 40px; background: var(--primary); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .feed-body { padding: 0 20px 20px 20px; }
        .feed-img { width: 100%; border-radius: 15px; margin-top: 10px; border: 1px solid var(--border); }

        .btn-ulka { background: var(--primary); color: #000; font-weight: 800; border-radius: 100px; padding: 8px 25px; border: none; transition: 0.3s; }
        .btn-ulka:hover { box-shadow: 0 0 20px var(--primary); opacity: 0.9; }
    </style>
</head>
<body>

    <header class="top-header">
        <div class="d-flex align-items-center gap-3">
            <i class="fas fa-bars cursor-pointer" onclick="document.getElementById('sidebar').classList.toggle('active')"></i>
            <span class="fw-bold tracking-tighter">ULKA <span class="text-info">COMMAND</span></span>
        </div>
        <div class="d-flex align-items-center gap-3">
            <div class="text-end d-none d-md-block" style="line-height: 1;">
                <div id="u-name" class="small fw-bold">Loading...</div>
                <small id="u-dept" class="text-muted" style="font-size: 10px;"></small>
            </div>
            <div class="avatar" id="u-initial">U</div>
        </div>
    </header>

    <aside id="sidebar" class="sidebar">
        <div class="p-4" id="menu-box">
            </div>
    </aside>

    <main class="main-content">
        <section class="glass-panel text-center">
            <h5 class="text-muted small fw-bold mb-3 uppercase tracking-widest">MONTHLY MISSION PROGRESS</h5>
            <div class="energy-label" id="pct-text">0%</div>
            <div class="text-muted small mb-2">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 7,000,000 THB</div>
            <div class="energy-bar-container">
                <div id="energy-fill" class="energy-bar-fill"></div>
            </div>
            <div class="small opacity-50">SYNCING REAL-TIME DATA FROM ULKA CLOUD...</div>
        </section>

        <h6 class="fw-bold mb-3 px-2 text-primary">DAILY SNAPSHOT</h6>
        <section class="snapshot-grid mb-5">
            <div class="snap-card card-mkt"><i class="fas fa-bullhorn text-danger"></i><span class="snap-val" id="val-mkt">0</span><span class="snap-label">MKT Ads</span></div>
            <div class="snap-card card-con"><i class="fas fa-video text-pink" style="color:#ec4899"></i><span class="snap-val" id="val-con">0</span><span class="snap-label">Content</span></div>
            <div class="snap-card card-sal"><i class="fas fa-shopping-cart text-info"></i><span class="snap-val" id="val-sal">0</span><span class="snap-label">Sales</span></div>
            <div class="snap-card card-cs"><i class="fas fa-headset text-purple" style="color:#a855f7"></i><span class="snap-val" id="val-cs">0</span><span class="snap-label">CS Resolve</span></div>
            <div class="snap-card card-stk"><i class="fas fa-box text-warning"></i><span class="snap-val" id="val-stk">0</span><span class="snap-label">Packed</span></div>
            <div class="snap-card card-tec"><i class="fas fa-tools text-success"></i><span class="snap-val" id="val-tec">0</span><span class="snap-label">Repair</span></div>
        </section>

        <h6 class="fw-bold mb-3 px-2 text-primary">PULSE FEED</h6>
        <section id="feed-container">
            <div class="feed-card">
                <div class="feed-header">
                    <div class="avatar">U</div>
                    <div>
                        <div class="fw-bold small">ULKA Announcements</div>
                        <small class="text-muted" style="font-size: 10px;">System Bot ‚Ä¢ Just now</small>
                    </div>
                </div>
                <div class="feed-body">
                    <p class="small mb-0">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö Command Center v3 ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 7 ‡∏•‡πâ‡∏≤‡∏ô!</p>
                </div>
            </div>
        </section>
    </main>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
        let sessionData = JSON.parse(localStorage.getItem("user_session")) || { 
            name: "‡πÅ‡∏Å‡πâ‡∏ß ‡∏ò‡∏µ‡∏£‡∏û‡∏•", nickname: "‡πÅ‡∏Å‡πâ‡∏ß", pos: "Dev", role: "GOD", dept: "‡πÑ‡∏≠‡∏ó‡∏µ" 
        };

        function init() {
            document.getElementById('u-name').innerText = sessionData.name;
            document.getElementById('u-dept').innerText = sessionData.dept;
            document.getElementById('u-initial').innerText = sessionData.nickname[0];
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏¢‡∏≠‡∏î‡∏à‡∏≥‡∏•‡∏≠‡∏á (‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å Apps Script ‡∏à‡∏£‡∏¥‡∏á‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á)
            loadDashboard();
        }

        async function loadDashboard() {
            // ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏à‡∏≤‡∏Å API
            const data = {
                actual: 2450000,
                mkt: 12, con: 5, sal: 42, cs: 156, stk: 89, tec: 24
            };

            const pct = (data.actual / 7000000 * 100).toFixed(1);
            document.getElementById('pct-text').innerText = pct + '%';
            document.getElementById('energy-fill').style.width = pct + '%';

            document.getElementById('val-mkt').innerText = data.mkt;
            document.getElementById('val-con').innerText = data.con;
            document.getElementById('val-sal').innerText = data.sal;
            document.getElementById('val-cs').innerText = data.cs;
            document.getElementById('val-stk').innerText = data.stk;
            document.getElementById('val-tec').innerText = data.tec;
        }

        window.onload = init;
    </script>
</body>
</html>
