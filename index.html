<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULKA SYSTEM v.1.0</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: #f0f2f5; font-family: 'Sarabun', sans-serif; padding: 10px; }
        
        /* üì∞ News Banner (‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å) */
        .news-banner { 
            background: linear-gradient(135deg, #0d6efd, #0099ff); 
            color: white; padding: 25px; border-radius: 15px; margin-bottom: 15px; 
        }

        /* üéÆ ‡πÅ‡∏ú‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î (‡πÄ‡∏°‡∏ô‡∏π) */
        .menu-grid { 
            display: flex; gap: 10px; overflow-x: auto; 
            padding-bottom: 10px; margin-bottom: 15px; 
            scrollbar-width: none;
        }
        .btn-menu { 
            flex: 0 0 auto; background: white; border: 1px solid #ddd; 
            padding: 10px 20px; border-radius: 50px; font-weight: bold; font-size: 14px;
        }
        .btn-menu.active { background: #0d6efd; color: white; border-color: #0d6efd; }

        /* üì¶ ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á Widget */
        .widget-window { 
            display: none; background: white; border-radius: 15px; 
            height: 75vh; border: 1px solid #ddd; overflow: hidden; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        iframe { width: 100%; height: 100%; border: none; }
        
        .d-none { display: none !important; }
    </style>
</head>
<body>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="fw-bold text-primary mb-0">ULKA SYSTEM</h5>
        <div id="user-info" class="small fw-bold"></div>
    </div>

    <div class="menu-grid" id="main-menu">
        <button class="btn-menu active" onclick="goHome()" id="btn-home">üì¢ ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</button>
        <button class="btn-menu d-none" id="btn-exec" onclick="openWidget('exec_dashboard.html', 'btn-exec')">‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£</button>
        <button class="btn-menu d-none" id="btn-mkt" onclick="openWidget('mkt_planner.html', 'btn-mkt')">‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î</button>
        <button class="btn-menu d-none" id="btn-csr" onclick="openWidget('csr_system.html', 'btn-csr')">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</button>
        <button class="btn-menu d-none" id="btn-acc" onclick="openWidget('acc_hr.html', 'btn-acc')">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button>
        <button class="btn-menu d-none" id="btn-tech" onclick="openWidget('tech_work.html', 'btn-tech')">‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á</button>
    </div>

    <div id="home-view">
        <div class="news-banner">
            <small class="fw-bold opacity-75">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏™‡∏≤‡∏Ç‡∏≤‡∏´‡∏•‡∏±‡∏Å (MTD)</small>
            <h1 class="fw-bold">‡∏ø 1,984,469.24</h1>
            <p class="mb-0 mt-2 small">* ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span id="current-time"></span></p>
        </div>
        <div class="card border-0 shadow-sm rounded-4 p-3">
            <h6 class="fw-bold"><i class="fas fa-bullhorn me-2 text-danger"></i>‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</h6>
            <p class="text-muted small">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ULKA ‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏á‡∏≤‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î!</p>
        </div>
    </div>

    <div id="widget-view" class="widget-window">
        <iframe id="main-iframe" src=""></iframe>
    </div>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏à‡∏≤‡∏Å Session (‡∏•‡∏π‡∏Å‡∏û‡∏µ‡πà‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ Login ‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢)
        const sessionData = JSON.parse(localStorage.getItem('user_session')) || { user: 'Guest', dept: 'guest', role: 'none' };
        
        // üõ†Ô∏è ‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°
        function initApp() {
            document.getElementById('user-info').innerText = `üë§ ${sessionData.user} (${sessionData.dept})`;
            document.getElementById('current-time').innerText = new Date().toLocaleString('th-TH');

            const dept = sessionData.dept;
            const role = sessionData.role;

            // ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå Admin/‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô
            if (role === 'admin' || dept.includes('‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô')) {
                document.querySelectorAll('.btn-menu').forEach(b => b.classList.remove('d-none'));
            } else {
                // ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏£‡∏≤‡∏¢‡πÅ‡∏ú‡∏ô‡∏Å
                if (dept === '‡∏ù‡πà‡∏≤‡∏¢‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î') document.getElementById('btn-mkt').classList.remove('d-none');
                if (dept === '‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢') document.getElementById('btn-csr').classList.remove('d-none');
                if (dept === '‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•') document.getElementById('btn-acc').classList.remove('d-none');
                if (dept === '‡πÅ‡∏ú‡∏ô‡∏Å‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á') document.getElementById('btn-tech').classList.remove('d-none');
            }
        }

        function openWidget(url, btnId) {
            document.getElementById('home-view').style.display = 'none';
            document.getElementById('widget-view').style.display = 'block';
            document.getElementById('main-iframe').src = url;

            document.querySelectorAll('.btn-menu').forEach(b => b.classList.remove('active'));
            document.getElementById(btnId).classList.add('active');
        }

        function goHome() {
            document.getElementById('home-view').style.display = 'block';
            document.getElementById('widget-view').style.display = 'none';
            document.getElementById('main-iframe').src = "";
            document.querySelectorAll('.btn-menu').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-home').classList.add('active');
        }

        initApp();
    </script>
</body>
</html>
